```r
library(shiny) #提供输入/输出的功能组件，不太美观
library(bslib) #用于美化Shiny应用的组件，提供页面布局和美化功能
```

## Shiny程序结构

* **ui:** 用户界面对象 #输入和图像设置，负责长什么样
* **server:** 服务器功能 #数据处理，负责怎么算
* **shinyApp():** 函数调用

## UI部分

#### 一张图像
```r
ui <- page_sidebar(   #page_sidebar()是bslib的函数，是包含三部分的大控件
	title = "...",   #标题
	sidebar = sidebar(   #sidebar()是bslib的函数，是侧边栏控件，容器里面可以放多个控件
		width = "...",   #侧边栏在总宽度中占多宽
		sliderInput(   #shiny的输入函数，是滑块方式的控件
			inputId = "bins",
			label = "...",
			min = ...,
			max = ...,
			value = ...   #初始值
		)
	),
	plotOutput(outputId = "distPlot", width = "...")   #shiny包的输出函数，用于显示图形; 
	
)

#bslib没有新的输入输出控件，而是直接使用的shiny的
#滑块输入值的名字: inputId
#右侧输出区域的名字: outputId
```

#### 多张图像
```r
ui <- fluidPage(   #容器里可以按行列布局，行列里可以再按行列布局
	titlePanel("...")   #标题
	sidebarLayout(   #布局组件，左右布局
		sliderPanel(
			sliderInput("mean1", "...", min = ..., max = ..., value = ..., step = ...),
			sliderInput("mean2", "...", min = ..., max = ..., value = ..., step = ...),
			sliderInput("sd1", "...", min = ..., max = ..., value = ..., step = ...),
			sliderInput("sd2", "...", min = ..., max = ..., value = ..., step = ...)
			),
			
		mainPanel(
			plotOutput(OutputId = ..., height = "..."),
			textOutput("..."),
			br(),   #空行函数
			plotOutput(OutputId = ..., height = "..."),
			textOutput("..."),
			br(),
			plotOutput(OutputId = ..., height = "..."),
			textOutput("..."),
			br(),
			plotOutput(OutputId = ..., height = "..."),
			textOutput("..."),
			br()
		)
	)
)

```

## Server部分

#### 一张图像
```r
server <- function(input, output) {   #server是一个变量，但类型是函数
	#outputId = "distPlot"
	output$distPlot <- renderPlot({   #renderPlot()是shiny的渲染函数
		#用{}包裹是为了写多行代码，也就是不是函数参数，只返回最后一个代码值给renderPlot()
		x <- data$col #取数据集里的一列
		#inputId = "bins"
		#包含length.out个数值;断点数 = bin数 + 1(每个bin由两个边界定义)
		bins <- seq(min(x), max(x), length.out = input$bins + 1) 
		
		hist(x, breaks = bins, ...)   #直方图函数
	
	})
}
```

#### 多张图像
```r
server <- function(input, output) {
	output$... <- renderPlot({
		x_value <- seq(..., ..., length.out = ...)   #构造等差数列
		density_data <- data.frame(   #数据框用nrow()查看行数
			x = rep(x_values, ...),
			#dnorm()是用于计算"正态分布概率密度函数(PDF)"的函数
			density = c(dnorm(x_values, mean = input$mean1, sd = input$sd1),
						dnorm(x_values, mean = input$mean1, sd = input$sd1)),
			distribution = rep(c("First Distribution", "Second Distribution"), each = 1000)   #两个及以上向量用c()拼接
		)
		
		ggplot(density_data, aes(x = x, y = density, color = distribution)) +
			geom_line(size = 1) +
			geom_hline(...) +   #geom_hline()代表水平参考线
			labs(titel = "...", x = "...", y = "...") +
			#手动指定颜色
			scale_color_manul(values = c("First Distribution" = "blue", 
                                    "Second Distribution" = "red")) +
			theme_minimal()
	})
	
	output$... <- renderPlot({
		...
	})
	
	#标注计算结果在图像下方
	output$... <- renderText({
		... <- ...
			paste("...:", round(..., 4))   #paste()函数构造字符串，返回output变量
	})
}
```


## ShinyApp部分

```r
shinyApp(ui = ui, server = server)   #代入构造的变量
```